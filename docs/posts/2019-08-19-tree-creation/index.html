<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>kaito_tateyama's blog</title>
<link rel="stylesheet" href="https://www.blog.uta8a.net/css/canvas.css" type="text/css">
<link rel="stylesheet" href="https://www.blog.uta8a.net/css/foot.css" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic&display=swap" rel="stylesheet">
</head>
<body>

<main>
<section>
    <header>
    <h1>木の作り方</h1>
    </header>

    <article>
    

<p>ABC138D Kiを本番で嘘解法で通してしまった(after_contestで気づいた)ので、ACコードと自分のコードにランダムにケースを入れてHackケースを探そう！と思いました。このとき、木のテストケースの作り方が分からなかったのでTwitterで教えてもらいました。以下、それらをまとめておきます。意見をくださった方、ありがとうございます。</p>

<h1 id="便利なツール">便利なツール</h1>

<p>グラフの可視化には<a href="https://hello-world-494ec.firebaseapp.com/about.html">GRAPH×GRAPH</a> が便利です。</p>

<h1 id="木を順に構成する">木を順に構成する</h1>

<p>Python3で書きました。</p>

<pre><code>import itertools, random  
N = 11  
R = 10  
l = list(range(1,N))  
h = list(itertools.permutations(l))  
seed = list(h[R])  
graph = []  
edge = []  
for i in seed:  
    if len(graph) != 0:  
        edge.append([i, graph[random.randrange(len(graph))]])  
    graph.append(i)  
print(edge)  
for i in edge:  
    print(&quot;{} {}&quot;.format(i[0], i[1]))  
</code></pre>

<p>output</p>

<pre><code>[[2, 1], [3, 1], [4, 2], [5, 3], [6, 2], [8, 4], [10, 4], [7, 2], [9, 2]]  
2 1  
3 1  
4 2  
5 3  
6 2  
8 4  
10 4  
7 2  
9 2  
</code></pre>

<p>GRAPH×GRAPHでの結果<br />
<img src="./p-1.png" alt="" /><br />
木ができています！<br />
<strong># 原理</strong><br />
$1$から$N$までの順列からランダムにひとつとってきて<code>seed</code>とします。以下のように木を構成します。<code>graph</code>はその時点での木の頂点、<code>edge</code>は出力する辺の集合を表します。<br />
1.まず<code>seed[0]</code>を<code>graph</code>に加える<br />
2.<code>seed[i]</code>と、<code>graph</code>からひとつだけ任意に選んだ頂点<code>K</code>をつなぐ。具体的には、<code>edge</code>に<code>[seed[i], K]</code>を追加する。<br />
3.<code>seed[i]</code>を<code>graph</code>に加える。<br />
以降、<code>seed[i]</code>がとれなくなるまで手順2,3を繰り返す。<br />
手順2で連結かつ閉路が存在しないことが確認できるので、これは木になります。</p>

<p>注意点としては、このコードでは<code>itertools.permutations</code>に時間がかかっているので、適当に順列を指定してあげればよいです。</p>

<h1 id="unionfindを使う">UnionFindを使う</h1>

<p>これたぶん次の完全グラフを間引く方法と似ている気がします。(よく分からなかった)<br />
おそらくKruscalがUnionFindをつかうので、それと近い…？</p>

<h1 id="完全グラフを間引いて全域木を作る">完全グラフを間引いて全域木を作る</h1>

<p>(後でやる)</p>

<h1 id="prufer-sequence">Prufer Sequence</h1>

<p><a href="https://en.wikipedia.org/wiki/Pr%C3%BCfer_sequence">https://en.wikipedia.org/wiki/Pr%C3%BCfer_sequence</a><br />
(後でやる)</p>

    </article>

    <footer>
            <ul>
                <li><a href="https://www.blog.uta8a.net/posts/2019-08-13-interkosenctf2019/">&laquo; InterKosenCTF 2019 Writeup</a></li>
                <li><a href="https://www.blog.uta8a.net/posts/2019-08-25-lt/">LTに向けた資料たち &raquo;</a></li>
            </ul>
    </footer>
</section>
<aside>
    <ul>
    <li><a href="https://www.blog.uta8a.net">Home</a></p>
    <li><a href="https://www.blog.uta8a.net/posts/">Posts</a></p>
    <li><a href="https://www.blog.uta8a.net/articles/">Articles</a></p>
    </ul>
</aside>
</main>

<footer>
    <div id="icons">
        <div class="wrapper github">
            <a href="https://github.com/uta8a">
                <img src="https://www.blog.uta8a.net/assets/github.svg" alt="github-icon">
            </a>
        </div>
        <div class="wrapper twitter">
            <a href="https://twitter.com/kaito_tateyama">
                <img src="https://www.blog.uta8a.net/assets/twitter.svg" alt="twitter-icon" href="">
            </a>
        </div>
    </div>
</footer>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>